import"./main-B5Qt9EMX.js";const f=document.querySelector("#base"),q=document.querySelector("#desired"),C=document.querySelectorAll(".add-new-btn"),N=document.querySelectorAll(".result-btn"),w=document.querySelectorAll(".clear-btn"),R=document.querySelectorAll(".del-btn"),M=document.querySelectorAll('input[type="number"]'),Q=document.querySelectorAll('input[type="text"]'),i=document.querySelector(".empty-card-message"),a=document.querySelector(".updated-recipe-list");document.querySelector(".original-recipe-list");const E=document.querySelectorAll(".tablink"),G=document.querySelectorAll(".recipe-scale");M.forEach(e=>e.addEventListener("keydown",L));Q.forEach(e=>e.addEventListener("input",k));y();I();E.forEach(e=>{e.addEventListener("click",D)});function D(e){const n=e.currentTarget,o=n.dataset.tab;G.forEach(u=>u.classList.remove("active")),E.forEach(u=>u.classList.remove("active")),n.classList.add("active"),document.getElementById(o).classList.add("active");const t={target:document.getElementById(o).querySelector(".clear-btn")};h(t),P(o),y()}function P(e){e==="key-ingr"?i.textContent="Input your key ingredient and the original recipe, then click ‘Scale Recipe’ to see your updated recipe. Be sure to include the key ingredient in the recipe.":e==="portion"&&(i.textContent="Input your ingredients and amounts, then click 'Scale Recipe' to see your updated recipe.")}C.forEach(e=>e.addEventListener("click",$));R.forEach(e=>e.addEventListener("click",b));function $(e){e.preventDefault();const n=e.target.closest(".recipe-scale"),o=n.querySelector(".ingredient-group"),s=e.currentTarget,t=o.cloneNode(!0);t.querySelectorAll("input, select").forEach(l=>{l.value="",l.tagName==="SELECT"&&(l.selectedIndex=0)});const c=t.querySelectorAll('input[type="number"]'),d=t.querySelectorAll('input[type="text"]');c.forEach(l=>l.addEventListener("keydown",L)),d.forEach(l=>l.addEventListener("input",k)),t.querySelector(".del-btn").addEventListener("click",b);const p=t.querySelector("input[name='radio-key']");p&&(p.checked=!1),s.insertAdjacentElement("beforebegin",t),y(),A(n)}w.forEach(e=>e.addEventListener("click",h));function h(e){const n=e.target.closest(".recipe-scale");[...n.querySelectorAll(".ingredient-group")].slice(1).forEach(t=>t.remove()),n.querySelectorAll("input, select").forEach(t=>{t.value="",t.tagName==="SELECT"&&(t.selectedIndex=0)}),a.querySelectorAll(".updated-ingredient, .error-message").forEach(t=>t.remove()),I(),a.append(i),y()}function b(e){e.preventDefault();const n=e.target.closest(".recipe-scale");e.target.closest(".ingredient-group").remove(),y(),A(n)}function y(){const e=document.querySelector(".recipe-scale.active");if(!e)return;const n=e.querySelectorAll(".ingredient-group"),o=e.querySelectorAll(".del-btn"),s=n.length===1;o.forEach(t=>t.disabled=s)}function k(e){const n=e.target;n.value=n.value.replace(/[0-9]/g,"")}function L(e){!/[0-9]/.test(e.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab",".","Enter"].includes(e.key)&&e.preventDefault()}function A(e){e.querySelectorAll(".ingredient-group").forEach((o,s)=>{const t=o.querySelector(".ingr-label");t.textContent="Ingredient "+(s+1)})}N.forEach(e=>e.addEventListener("click",F));function F(e){e.preventDefault();const n=e.target.closest(".recipe-scale");a.querySelectorAll(".updated-ingredient, .error-message").forEach(t=>t.remove());const o=n.querySelector(".ingr-name").value,s=n.querySelector(".ingr-qty").value;if(n.id==="portion"){if(!f.value||!q.value||f.value==="0"||q.value==="0"){i.remove();const c=document.createElement("p");c.classList.add("error-message"),c.textContent="Please input your base and desired yield!",a.append(c);return}if(!o||!s){i.remove();const c=document.createElement("p");c.classList.add("error-message"),c.textContent="Please input names and quantity of ingredients!",a.append(c);return}const t=n.querySelectorAll(".ingredient-group"),u=Number(q.value)/Number(f.value);i.remove(),t.forEach(c=>{const d=c.querySelector(".ingr-name").value,m=c.querySelector(".ingr-qty").value,p=c.querySelector(".select").value;if(!d||!m)return;const l=Number(m)*u,r=Math.round(l*100)/100,g=document.createElement("li");g.classList.add("updated-ingredient"),g.textContent=`${d}: ${r} ${p}`,a.append(g)})}else if(n.id==="key-ingr"){const t=n.querySelector("#key");if(!t.value||t.value==="0"){i.remove();const r=document.createElement("p");r.classList.add("error-message"),r.textContent="Please input the amount of your key ingredient!",a.append(r);return}if(!o||!s){i.remove();const r=document.createElement("p");r.classList.add("error-message"),r.textContent="Please input names and quantity of the original recipe ingredients!",a.append(r);return}const u=n.querySelector("input[name='radio-key']:checked");if(!u){i.remove();const r=document.createElement("p");r.classList.add("error-message"),r.textContent="Please select the key ingredient in the original recipe!",a.append(r);return}const c=u.closest(".ingredient-group");c.querySelector(".ingr-name").value;const d=c.querySelector(".ingr-qty").value;if(c.querySelector(".select").value,d==="0"||!d){i.remove();const r=document.createElement("p");r.classList.add("error-message"),r.textContent="Please enter the valid amount of the key ingredient in the original recipe! (can't be 0)",a.append(r);return}const m=Number(t.value)/Number(d),p=document.createElement("h3");p.classList.add("list-heading"),p.textContent="Your original recipe",n.querySelectorAll(".ingredient-group").forEach(r=>{const g=r.querySelector(".ingr-name").value,S=r.querySelector(".ingr-qty").value,x=r.querySelector(".select").value;if(!g||!S)return;const B=Number(S)*m,T=Math.round(B*100)/100;i.remove();const v=document.createElement("li");v.classList.add("updated-ingredient"),v.textContent=`${g}: ${T} ${x}`,a.append(v)})}}function I(){document.querySelector(".recipe-scale.active").querySelectorAll("input[name='radio-key']").forEach(o=>o.checked=!1)}
